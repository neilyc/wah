'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var App = function () {
  function App() {
    _classCallCheck(this, App);

    self = this;
    self._init();
  }

  _createClass(App, [{
    key: '_init',
    value: function _init() {
      document.querySelector('.toggle-nav').addEventListener('click', function () {
        document.querySelector('.topnav').classList.toggle("responsive");
      });

      window.onload = function () {
        self._menuCheckActive();
        document.body.classList.add("loaded");
      };
      window.onscroll = function (e) {
        self._toggleTopNav();
      };
    }
  }, {
    key: '_toggleTopNav',
    value: function _toggleTopNav() {
      var scrollTop = Math.abs(document.body.getBoundingClientRect().top),
          header = document.querySelector('.header'),
          headerHeight = header.clientHeight - document.querySelector('.topnav-container').clientHeight;

      if (scrollTop > headerHeight) {
        header.classList.add('down');
      }
      if (scrollTop < header.clientHeight) {
        header.classList.remove('down');
      }
    }
  }, {
    key: '_menuCheckActive',
    value: function _menuCheckActive() {
      var urlMatch = false,
          path = decodeURIComponent(window.location.pathname),
          href;

      Array.prototype.forEach.call(document.querySelectorAll('.topnav li a'), function (elem) {
        href = elem.getAttribute('href');
        if (path.substring(0, href.length) === href && href != '/') {
          elem.classList.add('active');
        }
      });
    }
  }]);

  return App;
}();